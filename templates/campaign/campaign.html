{% extends "base.html" %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/campaign.css') }}">
{% endblock %}

{% block content %}
<div class="campaign-page">
  <nav class="campaign-nav">
    <a href="{{ url_for('campaigns') }}" class="back-btn">‚Üê –í—Å–µ –∫–∞–º–ø–∞–Ω–∏–∏</a>
    <h1 class="campaign-title">{{ campaign.title }}</h1>
  </nav>

  <div class="campaign-layout">
    <aside class="campaign-sidebar">
      <div class="sidebar-section">
        <h3>üìÖ –î–µ—Ç–∞–ª–∏ –∫–∞–º–ø–∞–Ω–∏–∏</h3>
        <div class="campaign-meta">
          <p><strong>–ú–∞—Å—Ç–µ—Ä:</strong> {{ username }}</p>
          <p><strong>–°–∏—Å—Ç–µ–º–∞:</strong> {{ campaign.system }}</p>
          <p><strong>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:</strong> {{ campaign.created_date_formatted }}</p>
        </div>
      </div>

      <div class="player-list-container">
        <h3>üë• –ò–≥—Ä–æ–∫–∏ ({{ campaign.players|length }})</h3>
        <ul class="players-list" data-campaign-title="{{ campaign.title if campaign else '' }}">
          {% for player in campaign.players %}
          <li class="player-card">
            <a href="{{ url_for('player_editor', title=campaign.title, name_player=player.name) }}">
              <span class="player-name">{{ player.name }}</span>
              <span class="player-class">–ö–ª–∞—Å—Å: {{ player.char_class }}</span><br>
              <span class="player-level"> –£—Ä–æ–≤–µ–Ω—å: {{ player.level }}</span>
            </a>
            <button class="btn delete-btn" data-player-name="{{ player.name }}">–£–¥–∞–ª–∏—Ç—å</button>
          </li>
          {% endfor %}
        </ul>
      </div>
      <a href="{{ url_for('add_player', title=campaign.title) }}" class="btn add-player-btn">+ –î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞</a>

      <div class="sidebar-section">
        <h3>üó∫Ô∏è –†–µ—Å—É—Ä—Å—ã</h3>
        <div class="resources-list">
          <a href="#" class="resource-link">–ì—Ä–∞—Ñ-—Å—é–∂–µ—Ç–∞</a>
          <a href="#" class="resource-link">?</a>
        </div>
      </div>
    </aside>

    <main class="campaign-main">
      <div class="campaign-tabs">
        <button class="tab-btn active" data-tab="notes">üìù –ó–∞–º–µ—Ç–∫–∏</button>
        <button class="tab-btn" data-tab="lore">üé≠ –°–µ—Å—Å–∏–∏</button>
        <button class="tab-btn" data-tab="characters">üßô –ü–µ—Ä—Å–æ–Ω–∞–∂–∏</button>
        <button class="tab-btn" data-tab="lore">üìñ –°—é–∂–µ—Ç</button>
        <button class="tab-btn" data-tab="lore">–ó–∞–∫–ª–∏–Ω–∞–Ω–∏—è</button>
        <button class="tab-btn" data-tab="lore">–ú–æ–Ω—Å—Ç—Ä—ã</button>
        <button class="tab-btn" data-tab="lore">–õ–æ–∫–∞—Ü–∏–∏</button>
      </div>

      <div class="tab-content active" id="notes">
        <div class="editor-container">
          <textarea class="campaign-notes">{{ campaign.notes }}</textarea>
        </div>
        <button class="btn save-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–º–µ—Ç–∫–∏</button>
      </div>

      <div class="tab-content" id="sessions">
        <div class="sessions-list">
          {% for session in campaign.sessions %}
          <div class="session-card">
            <div class="session-header">
              <h4>–°–µ—Å—Å–∏—è #{{ session.number }}: {{ session.title }}</h4>
              <span class="session-date">{{ session.date }}</span>
            </div>
            <p class="session-summary">{{ session.summary }}</p>
            <div class="session-actions">
              <a href="#" class="btn session-btn">üìù –ó–∞–º–µ—Ç–∫–∏</a>
              <a href="#" class="btn session-btn">üé≠ –û—Ç—á–µ—Ç</a>
            </div>
          </div>
          {% endfor %}
          <button class="btn add-session-btn">+ –ù–æ–≤–∞—è —Å–µ—Å—Å–∏—è</button>
        </div>
      </div>
    </main>
  </div>
  <footer class="campaign-footer">
    <p>–ö–∞–º–ø–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∞: {{ campaign.created_date_formatted }}</p>
    <p>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ: {{ campaign.updated_date_formatted }}</p>
  </footer>
</div>
<script src="{{ url_for('static', filename='js/delete-player.js') }}"></script>
{% endblock %}