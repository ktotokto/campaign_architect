{% extends "base.html" %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/add_player.css') }}">
{% endblock %}

{% block title %}–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞{% endblock %}

{% block content %}
<form method="post">
    {{ form.hidden_tag() }}
    <div class="character-sheet">
        <div class="sheet-header">
            <h2>–õ–∏—Å—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</h2>
            {{ form.name(class="input", placeholder="–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞") }}
        </div>

        <div class="section">
            <h3>–†–∞—Å–∞ / –ö–ª–∞—Å—Å / –£—Ä–æ–≤–µ–Ω—å</h3>
            {{ form.race(class="input", placeholder="–†–∞—Å–∞") }}
            {{ form.char_class(class="input", placeholder="–ö–ª–∞—Å—Å") }}
            {{ form.level(class="input", placeholder="–£—Ä–æ–≤–µ–Ω—å") }}
        </div>

        <div class="section">
            <h3>–ü—Ä–µ–¥—ã—Å—Ç–æ—Ä–∏—è</h3>
            {{ form.background(rows="4", placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–µ–¥—ã—Å—Ç–æ—Ä–∏—é –ø–µ—Ä—Å–æ–Ω–∞–∂–∞...") }}
        </div>

        <div class="sheet-body">
            <table class="stats-table">
                {% set grouped_skills = {
                '–°–∏–ª–∞': ['–ê—Ç–ª–µ—Ç–∏–∫–∞'],
                '–õ–æ–≤–∫–æ—Å—Ç—å': ['–ê–∫—Ä–æ–±–∞—Ç–∏–∫–∞', '–õ–æ–≤–∫–æ—Å—Ç—å —Ä—É–∫', '–°–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å'],
                '–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç': ['–ò—Å–∫—É—Å—Å—Ç–≤–æ (–†–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ)', '–ú–∞–≥–∏—è (–ó–Ω–∞–Ω–∏–µ –º–∞–≥–∏–∏)', '–ò—Å—Ç–æ—Ä–∏—è', '–ü—Ä–∏—Ä–æ–¥–∞', '–†–µ–ª–∏–≥–∏—è'],
                '–ú—É–¥—Ä–æ—Å—Ç—å': ['–í—ã–∂–∏–≤–∞–Ω–∏–µ', '–ú–µ–¥–∏—Ü–∏–Ω–∞', '–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å', '–ü—Ä–æ–Ω–∏—Ü–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å', '–°–ª–µ–¥–æ–ø—ã—Ç—Å—Ç–≤–æ', '–£—Ö–æ–¥ –∑–∞
                –∂–∏–≤–æ—Ç–Ω—ã–º–∏'],
                '–•–∞—Ä–∏–∑–º–∞': ['–ó–∞–ø—É–≥–∏–≤–∞–Ω–∏–µ', '–û–±–º–∞–Ω (–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞)', '–£–±–µ–∂–¥–µ–Ω–∏–µ', '–§–æ–∫—É—Å—ã']
                } %}


                <tr>
                    <td>–°–∏–ª–∞</td>
                    <td><input type="number" id="str" name="strength" value="{{ form.strength.data }}" min="1" max="30">
                    </td>
                    <td><span id="mod-str">+0</span></td>
                    <td>
                        {% for skill_value, skill_label in SKILL_CHOICES %}
                        {% if skill_label in grouped_skills['–°–∏–ª–∞'] %}
                        <label>
                            <input type="checkbox" name="skills" value="{{ skill_value }}"
                                   {% if skill_value in form.skills.data %} checked{% endif %}>
                            {{ skill_label }}
                        </label><br>
                        {% endif %}
                        {% endfor %}
                    </td>
                </tr>
                <tr>
                    <td>–õ–æ–≤–∫–æ—Å—Ç—å</td>
                    <td><input type="number" id="dex" name="dexterity" value="{{ form.dexterity.data }}" min="1"
                               max="30"></td>
                    <td><span id="mod-dex">+0</span></td>
                    <td>
                        {% for skill_value, skill_label in SKILL_CHOICES %}
                        {% if skill_label in grouped_skills['–õ–æ–≤–∫–æ—Å—Ç—å'] %}
                        <label>
                            <input type="checkbox" name="skills" value="{{ skill_value }}"
                                   {% if skill_value in form.skills.data %} checked{% endif %}>
                            {{ skill_label }}
                        </label><br>
                        {% endif %}
                        {% endfor %}
                    </td>
                </tr>
                <tr>
                    <td>–¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ</td>
                    <td><input type="number" id="con" name="constitution" value="{{ form.constitution.data }}" min="1"
                               max="30"></td>
                    <td><span id="mod-con">+0</span></td>
                    <td>–ù–µ—Ç –Ω–∞–≤—ã–∫–æ–≤</td>
                </tr>
                <tr>
                    <td>–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç</td>
                    <td><input type="number" id="int" name="intelligence" value="{{ form.intelligence.data }}" min="1"
                               max="30"></td>
                    <td><span id="mod-int">+0</span></td>
                    <td>
                        {% for skill_value, skill_label in SKILL_CHOICES %}
                        {% if skill_label in grouped_skills['–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç'] %}
                        <label>
                            <input type="checkbox" name="skills" value="{{ skill_value }}"
                                   {% if skill_value in form.skills.data %} checked{% endif %}>
                            {{ skill_label }}
                        </label><br>
                        {% endif %}
                        {% endfor %}
                    </td>
                </tr>
                <tr>
                    <td>–ú—É–¥—Ä–æ—Å—Ç—å</td>
                    <td><input type="number" id="wis" name="wisdom" value="{{ form.wisdom.data }}" min="1" max="30">
                    </td>
                    <td><span id="mod-wis">+0</span></td>
                    <td>
                        {% for skill_value, skill_label in SKILL_CHOICES %}
                        {% if skill_label in grouped_skills['–ú—É–¥—Ä–æ—Å—Ç—å'] %}
                        <label>
                            <input type="checkbox" name="skills" value="{{ skill_value }}"
                                   {% if skill_value in form.skills.data %} checked{% endif %}>
                            {{ skill_label }}
                        </label><br>
                        {% endif %}
                        {% endfor %}
                    </td>
                </tr>
                <tr>
                    <td>–•–∞—Ä–∏–∑–º–∞</td>
                    <td><input type="number" id="cha" name="charisma" value="{{ form.charisma.data }}" min="1" max="30">
                    </td>
                    <td><span id="mod-cha">+0</span></td>
                    <td>
                        {% for skill_value, skill_label in SKILL_CHOICES %}
                        {% if skill_label in grouped_skills['–•–∞—Ä–∏–∑–º–∞'] %}
                        <label>
                            <input type="checkbox" name="skills" value="{{ skill_value }}"
                                   {% if skill_value in form.skills.data %} checked{% endif %}>
                            {{ skill_label }}
                        </label><br>
                        {% endif %}
                        {% endfor %}
                    </td>
                </tr>
            </table>
            <div class="section">
                <button type="submit" class="btn save-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" class="btn cancel-btn"
                        onclick="window.location.href='{{ url_for('current_campaigns', title=campaign.title) }}'">‚ùå –û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>
</form>

<script src="{{ url_for('static', filename='js/stats.js') }}"></script>
{% endblock %}